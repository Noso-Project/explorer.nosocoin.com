<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Noso Exporer</title>
    <link rel="icon" type="image/x-icon" href="img/favicon.ico">
    <!-- Include Highcharts library -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/stock.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"

integrity="sha512-d9xgZrVZpmmQlfonhQUvTR7lMPtO7NkZMkA0ABN3PHCbKA5nqylQ/yWlFAyY6hYgdF1Qh6nYiuADWwKB4C2WSw=="

crossorigin="anonymous">
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="js/search.js"></script>
    <!---chart-->
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <!-- Add custom CSS here -->
    <link href="css/sb-admin.css" rel="stylesheet">
    <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
    <!-- Page Specific CSS -->
    <style>
    #spinner-container {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        align-items: center;
        justify-content: center;
        height: 100vh;
    }

    #spinner {
        border: 4px solid rgba(0, 0, 0, 0.1);
        border-top-color: transparent;
        border-right-color: #7988a3;
        border-bottom-color: transparent;
        border-left-color: #7988a3;
        animation: spinner 0.8s linear infinite;
        height: 50px;
        width: 50px;
        border-radius: 50%;
    }

    @keyframes spinner {
        to {
            transform: rotate(360deg);
        }
    }

    @media (max-width: 768px) {
        #spinner {
            height: 30px;
            width: 30px;
        }
    }
    </style>
    <!--style-->
  </head>
  <body color="#222222" style="                                                                                                                                                                                                                                                background-image: url(&quot;&quot;);">
    <div id="wrapper">
      <!-- Sidebar -->
      <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header"> <button type="button" class="navbar-toggle"

            data-toggle="collapse" data-target=".navbar-ex1-collapse"> <span class="sr-only">Toggle
              navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span>
            <span class="icon-bar"></span> </button><a class="navbar-brand" href="explorer.html"><img

              src="img/logo_clearbg.png" alt="nosologo" title="nosologo" style="width: 20px; height: 20px;">&nbsp;
            NOSO <span class="navbar-logo">Explorer</span> <font size="1px">Beta</font>
          </a> </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav side-nav">
            <!--  <li><a href="explorer.html"><i class="fa fa-dashboard"></i>
                NosoStats</a></li> -->
            <li class="active"><a href="explorer.html"><i class="fa fa-search"></i>
                Explorer</a></li>
            <!--  <li><a href="masternodes.html"> Coin Distribution</a></li>
            <li><a href="masternodes.html"> Top Addresses</a></li> -->
            <li><a href="masternodes.html"><i class="fa fa-globe"></i>
                Masternodes</a></li>
            <li><a href="api.html"><i class="fa fa-wrench"></i> API </a></li>
            <li class="priority-9"><a href="qr.html"><img src="img/qr.png" height="30px">
                QR</a></li>
            <!-- <li><a href="masternodes.html"><i class="fa fa-money"></i>
                Market</a></li> -->
          </ul>
          <!-- /.navbar-top-right -->
          <div class="toprow">
            <ul class="nav navbar-nav navbar-right navbar-user">
              <li><a href="https://twitter.com/NosoCoin" target="_blank"> <img

                    src="img/twitter_bird.png" style="width: 20px; height: 16px;"

                    alt="Noso on Twitter"></a> </li>
              <li><a href="https://discord.gg/weed5ePmfY" target="_blank"> <img

                    src="img/discord.png" style="width: 24px; height: 22px;" alt="Noso on Discord"></a></li>
              <li><a href="https://t.me/nosocoin" target="_blank"> <img src="img/telegram.png"

                    style="width: 24px; height: 23px;" alt="Noso on telegram"></a></li>
              <li><a href="https://nosocoin.com/"> <img src="img/nosoN.png" style="width: 24px; height: 23px;"

                    alt="Noso Website"></a></li>
              <li><a href="https://docs.nosocoin.com/noso-developers-portal/rpc-connection/running-a-noso-json-rpc-node-for-development-utilizing-nosos-rest-api"

                  target="_blank"> <img src="img/api.png" style="width: 28px; height: 24px;"

                    alt="Noso Developers"></a></li>
            </ul>
          </div>
        </div>
        <!-- /.navbar-collapse --> </nav>
      <div id="page-wrapper" ;="">
        <!-- ADDRESS ENTRY FORM  --><br>
        <div class="row2">
         <div class="col-lg-6"> <p class="announcement-subheading"><img src="img/mbag.png" style="width: 24px; height: 18px;">&nbsp;<font

              size="3px" color="fbe04d">Determine the total earnings generated
              by your Masternode.&nbsp;</font><img src="img/mbag.png" style="width: 24px; height: 18px;"></p>
          <p class="announcement-subheading">Please note that the process of
            reporting Masternode earnings may take some time. Please
            be patient.&nbsp; Search multiple Masternode addresses
            simultaneously separating each with a comma (,)
            (address1,address2),address3).</p>
           <br></div>
          <div class="search1-wrapper"> <input id="addresses" name="addresses"

              placeholder="Enter your Masternode Address" type="text"> <button

              type="submit" onclick="processAddresses()">Submit</button> </div>
          <div id="spinner-container">
            <div id="spinner" class="spinner"></div>
          </div>
          <br>
          <br>
          <p class="announcement-text"><span id="results"></span></p>
        </div>
        <!--END ADDRESS ENTRY FORM  --> <font color="#fbe04d"><b> <font size="3px"

              color="#bbb"> <br>
              <div class="row"> <img src="img/logo_clearbg.png" alt="nosologo"

                  title="nosologo" style="width: 15px; height: 15px;">&nbsp;<font

                  size="1px" color="#bbb">Powered by NOSO Blockchain&nbsp; |
                  &nbsp; Built by the NOSO Community</font> </div>
            </font></b></font></div>
      <font color="#fbe04d"><b> <font size="3px" color="#bbb"> </font></b></font></div>
    <font color="#fbe04d"><b> <font size="3px" color="#bbb">
          <!-- /#page-wrapper -->
          <!-- /#wrapper -->
          <!-- JavaScript -->
          <script src="js/jquery-1.10.2.js"></script>
          <script src="js/bootstrap.js"></script>
          <!-- Page Specific Plugins -->
          <script>
function processAddresses() {
    const searchButton = document.querySelector('.search1-wrapper button');
    if (searchButton) {
        searchButton.disabled = true;

        const addressesInput = document.getElementById('addresses');
        const addressesString = addressesInput.value;

        // Split the addresses into an array
        const addressesArray = addressesString.split(',');

        // Show the loading spinner
        const spinnerContainer = document.getElementById('spinner-container');
        spinnerContainer.style.display = 'flex';

        // Clear previous results
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = '';

        // Create a table to display the results
        const table = document.createElement('table');
        table.classList.add('table', 'table-bordered', 'table-dark');

        // Create table header
        const headerRow = table.insertRow();
        const addressHeader = headerRow.insertCell();
        const resultHeader = headerRow.insertCell();
        addressHeader.textContent = 'Address';
        resultHeader.textContent = 'Total Earnings';

        // Function to process addresses sequentially
        function processAddressSequentially(index) {
            if (index < addressesArray.length) {
                const address = addressesArray[index];

                // Build the API URL for the address
                const apiUrl = `https://api.nosocoin.com/address/earning?address=${encodeURIComponent(address)}`;

                // Make the API request
                fetch(apiUrl)
                    .then(response => response.json())
                    .then(data => {
                        // Create a row for each result
                        displayAddressData(table, address, data);

                        // Process the next address
                        processAddressSequentially(index + 1);
                    })
                    .catch(error => {
                        // Handle errors
                        const row = table.insertRow();
                        const addressCell = row.insertCell();
                        const resultCell = row.insertCell();
                        addressCell.textContent = address;
                        resultCell.textContent = `Error - ${error.message}`;

                        // Process the next address
                        processAddressSequentially(index + 1);
                    });
            } else {
                // All addresses processed, hide the loading spinner
                spinnerContainer.style.display = 'none';

                // Append the table to the resultsDiv
                resultsDiv.appendChild(table);

                // Add Export to CSV button
                addExportButton(table);

                // Enable the search button
                searchButton.disabled = false;
            }
        }

        // Start processing addresses sequentially
        processAddressSequentially(0);
    }
}

// Function to display address data in the table
function displayAddressData(table, address, data) {
    const row = table.insertRow();
    const addressCell = row.insertCell();
    const resultCell = row.insertCell();
    addressCell.textContent = address;
    resultCell.textContent = JSON.stringify(data);
}

// Function to add Export to CSV button
function addExportButton(table) {
    const exportButton = document.createElement('button');
    exportButton.textContent = 'Export to CSV';
    exportButton.addEventListener('click', () => exportToCSV(table));
    document.getElementById('results').appendChild(exportButton);
}

// Function to export table data to CSV
function exportToCSV(table) {
    const csvRows = [];
    const rows = table.querySelectorAll('tr');

    for (const row of rows) {
        const csvRow = [];
        const cells = row.querySelectorAll('td');

        for (const cell of cells) {
            csvRow.push(cell.textContent);
        }

        csvRows.push(csvRow.join(','));
    }

    const csvContent = csvRows.join('\n');
    const blob = new Blob([csvContent], { type: 'text/csv' });
    const link = document.createElement('a');
    link.href = window.URL.createObjectURL(blob);
    link.download = 'addresses.csv';
    link.click();
}

</script> </font> </b></font>
  </body>
</html>
